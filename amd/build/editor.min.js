define ("mod_onlyofficeeditor/editor",["jquery"],function(a){var b=function(b){require(["core/notification"],function(c){require(["core/str"],function(d){var e=d.get_string(b,"onlyofficeeditor");a.when(e).done(function(a){c.addNotification({message:a,type:"error"})})})})};a.urlParam=function(a){var b=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);if(null===b){return null}return decodeURI(b[1])||0};var c=function(a,b){var c,d=a.indexOf("&actionType=");if(-1!=d){c=a.substring(0,d)+"&actionType="+encodeURIComponent(b.type)+"&actionData="+encodeURIComponent(b.data)}else{c=a+"&actionType="+encodeURIComponent(b.type)+"&actionData="+encodeURIComponent(b.data)}return c};return{init:function init(d,e){if("undefined"==typeof DocsAPI){b("docserverunreachable");return}var f=M.cfg.wwwroot+"/mod/onlyofficeeditor/dsconfig.php";a.getJSON(f,{courseid:d,cmid:e,actionType:a.urlParam("actionType"),actionData:a.urlParam("actionData")}).done(function(f){var g=f.config;g.events={onMakeActionLink:function onMakeActionLink(a){var b=a.data.action;k.setActionLink(c(location.href,b))}};var h=function(){k.setUsers({users:j})},i=function(f){var g=f.data.message,h=f.data.emails,i=c(location.href,f.data.actionLink.action);a.ajax(M.cfg.wwwroot+"/mod/onlyofficeeditor/onlyofficeeditorapi.php?apiType=mention&cmid="+e,{type:"POST",dataType:"json",data:{comment:g,emails:h,link:i,courseid:d}}).fail(function(){b("onmentionerror")})},j=f.userstomention;if(null!==j){g.events.onRequestUsers=h;g.events.onRequestSendNotify=i}var k=new DocsAPI.DocEditor("onlyofficeeditor-editor",g)})}}});
//# sourceMappingURL=editor.min.js.map

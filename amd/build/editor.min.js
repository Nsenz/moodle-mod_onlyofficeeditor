define ("mod_onlyofficeeditor/editor",["jquery"],function(a){var b=function(b){require(["core/notification"],function(c){require(["core/str"],function(d){var e=d.get_string(b,"onlyofficeeditor");a.when(e).done(function(a){c.addNotification({message:a,type:"error"})})})})};a.urlParam=function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(null===b){return null}return decodeURI(b[1])||0};var c=function(a,b){var c,d=a.indexOf("&actionType=");if(-1!=d){c=a.substring(0,d)+"&actionType="+encodeURIComponent(b.type)+"&actionData="+encodeURIComponent(b.data)}else{c=a+"&actionType="+encodeURIComponent(b.type)+"&actionData="+encodeURIComponent(b.data)}return c};return{init:function init(d,e){if("undefined"==typeof DocsAPI){b("docserverunreachable");return}var f=M.cfg.wwwroot+"/mod/onlyofficeeditor/dsconfig.php";a.getJSON(f,{courseid:d,cmid:e,actionType:a.urlParam("actionType"),actionData:a.urlParam("actionData")}).done(function(d){var f=d.config;f.events={onMakeActionLink:function onMakeActionLink(a){var b=a.data.action;j.setActionLink(c(location.href,b))}};var g=function(){j.setUsers({users:i})},h=function(d){var f=d.data.message,g=d.data.emails,h=c(location.href,d.data.actionLink.action);a.ajax(M.cfg.wwwroot+"/mod/onlyofficeeditor/onlyofficeeditorapi.php?apiType=mention&cmid="+e,{type:"POST",dataType:"json",data:{comment:f,emails:g,link:h}}).fail(function(){b("onmentionerror")})},i=d.userstomention;if(null!==i){f.events.onRequestUsers=g;f.events.onRequestSendNotify=h}var j=new DocsAPI.DocEditor("onlyofficeeditor-editor",f)})}}});
//# sourceMappingURL=editor.min.js.map

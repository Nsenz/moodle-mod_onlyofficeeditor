define ("mod_onlyofficeeditor/editor",["jquery"],function(a){var b=function(b,c){require(["core/notification"],function(d){require(["core/str"],function(e){var f=e.get_string(b,"onlyofficeeditor");a.when(f).done(function(a){d.addNotification({message:a,type:c})})})})},c=null,d=function(a,b,d){require(["jquery","core/templates","core/modal_factory","mod_onlyofficeeditor/modal_saveas"],function(e,f,g,h){var i=e(".onlyofficeeditor-container");if(null===c){c=g.create({type:h.TYPE},i)}c.then(function(c){c.courseid=d;c.CMID=b;c.saveAsData=a});c.done(function(a){a.renderSections(a.getBody(),b,d);a.show()})})};return{init:function init(c,e){if("undefined"==typeof DocsAPI){b("docserverunreachable","error");return}var f=M.cfg.wwwroot+"/mod/onlyofficeeditor/dsconfig.php";a.getJSON(f,{courseid:c,cmid:e}).done(function(a){var f=null,g=a.config,h=a.addinstance,i=function(a,b){if(console&&console.log){console.log(a)}if(b&&f){f.showMessage(a)}};g.events={onAppReady:function onAppReady(){i("Document editor ready")},onError:function onError(a){if(a){i(a.data)}}};var j=function(a){var b={title:a.data.title,url:a.data.url,courseid:c,section:null};d(b,e,c)};if(h){g.events.onRequestSaveAs=j}if(("docxf"===g.document.fileType||"oform"===g.document.fileType)&&7>DocsAPI.DocEditor.version().split(".")[0]){b("oldversion","error")}else{f=new DocsAPI.DocEditor("onlyofficeeditor-editor",g)}})}}});
//# sourceMappingURL=editor.min.js.map

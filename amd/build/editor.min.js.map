{"version":3,"sources":["../src/editor.js"],"names":["define","$","displayError","error","require","str","errorIsAvailable","get_string","when","done","localizedStr","text","addClass","init","courseid","cmid","DocsAPI","ajaxUrl","M","cfg","wwwroot","getJSON","config","DocEditor"],"mappings":"AAsBAA,OAAM,+BAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAC3B,GAAIC,CAAAA,CAAY,CAAG,SAASC,CAAT,CAAgB,CAC/BC,OAAO,CAAC,CAAC,UAAD,CAAD,CAAe,SAASC,CAAT,CAAc,CAChC,GAAIC,CAAAA,CAAgB,CAAGD,CAAG,CAACE,UAAJ,CAAeJ,CAAf,CAAsB,kBAAtB,CAAvB,CACAF,CAAC,CAACO,IAAF,CAAOF,CAAP,EAAyBG,IAAzB,CAA8B,SAASC,CAAT,CAAuB,CACjDT,CAAC,CAAC,0BAAD,CAAD,CAA8BU,IAA9B,CAAqCD,CAArC,CACAT,CAAC,CAAC,0BAAD,CAAD,CAA8BU,IAA9B,CAAmCD,CAAnC,EAAiDE,QAAjD,CAA0D,OAA1D,CACH,CAHD,CAIH,CANM,CAOV,CARD,CAUA,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAmBC,CAAnB,CAAyB,CAC3B,GAAuB,WAAnB,QAAOC,CAAAA,OAAX,CAAoC,CAChCd,CAAY,CAAC,sBAAD,CAAZ,CACA,MACH,CACD,GAAIe,CAAAA,CAAO,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,oCAA9B,CACAnB,CAAC,CAACoB,OAAF,CAAUJ,CAAV,CAAmB,CACfH,QAAQ,CAAEA,CADK,CAEfC,IAAI,CAAEA,CAFS,CAAnB,EAGGN,IAHH,CAGQ,SAASa,CAAT,CAAiB,CAErB,GAAIN,CAAAA,OAAO,CAACO,SAAZ,CAAsB,yBAAtB,CAAiDD,CAAjD,CACH,CAND,CAOH,CAdE,CAgBV,CA3BK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/* @package    mod_onlyofficeeditor\n * @copyright  2022 Ascensio System SIA <integration@onlyoffice.com>\n * @copyright  based on work by 2018 Olumuyiwa Taiwo <muyi.taiwo@logicexpertise.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\ndefine(['jquery'], function($) {\n    var displayError = function(error) {\n        require(['core/str'], function(str) {\n            var errorIsAvailable = str.get_string(error, 'onlyofficeeditor');\n            $.when(errorIsAvailable).done(function(localizedStr) {\n                $(\"#onlyofficeeditor-editor\").text = localizedStr;\n                $(\"#onlyofficeeditor-editor\").text(localizedStr).addClass(\"error\");\n            });\n        });\n    };\n\n    return {\n        init: function(courseid, cmid) {\n            if (typeof DocsAPI === \"undefined\") {\n                displayError('docserverunreachable');\n                return;\n            }\n            var ajaxUrl = M.cfg.wwwroot + '/mod/onlyofficeeditor/dsconfig.php';\n            $.getJSON(ajaxUrl, {\n                courseid: courseid,\n                cmid: cmid\n            }).done(function(config) {\n                // eslint-disable-next-line no-undef\n                new DocsAPI.DocEditor(\"onlyofficeeditor-editor\", config);\n            });\n        }\n    };\n});\n"],"file":"editor.min.js"}